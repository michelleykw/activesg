{"ast":null,"code":"import _slicedToArray from\"/Users/kagurayuuki/Documents/AY202122/Sem2/CS4249 HCI/activesg/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useParams,useLocation,useNavigate}from\"react-router-dom\";import{makeStyles,useTheme}from'@mui/styles';import Grid from'@mui/material/Grid';import Typography from'@mui/material/Typography';import SearchPage from'./SearchPage';import SearchBar from'../components/SearchBar.jsx';import{allSearchOptions}from'../resources/constants.jsx';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{container:{minHeight:'calc(100vh - 56px)',paddingTop:theme.spacing(2)}};});function FacilitiesPage(){var classes=useStyles();var location=useLocation();var navigate=useNavigate();var versionId=new URLSearchParams(location.search).get('version')||1;var isOldVersion=versionId==1||versionId==2;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openPage=_useState2[0],setOpenPage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),hasSearchValues=_useState4[0],setHasSearchValues=_useState4[1];var _useState5=useState(allSearchOptions),_useState6=_slicedToArray(_useState5,2),options=_useState6[0],setOptions=_useState6[1];var _useState7=useState(JSON.parse(window.localStorage.getItem('recentSearchList'))),_useState8=_slicedToArray(_useState7,2),recentSearchList=_useState8[0],setRecentSearchList=_useState8[1];useEffect(function(){if(window.localStorage.getItem('recentSearchList')===null){window.localStorage.setItem('recentSearchList',JSON.stringify([]));}},[recentSearchList,options]);var goToSearchResultPage=function goToSearchResultPage(searchInput){navigate(\"/facilities/result?version=\".concat(versionId,\"&query=\").concat(searchInput));};var resetSearchInput=function resetSearchInput(){setHasSearchValues(false);setOptions(allSearchOptions);};var updateRecentSearch=function updateRecentSearch(newSearch){if(newSearch.length>0){updateHasSearchValues(newSearch);var _recentSearchList=JSON.parse(window.localStorage.getItem('recentSearchList'));if(!_recentSearchList.includes(newSearch)){_recentSearchList.unshift(newSearch);}else if(_recentSearchList.includes(newSearch)){var index=_recentSearchList.indexOf(newSearch);_recentSearchList.splice(index,1);_recentSearchList.unshift(newSearch);}window.localStorage.setItem('recentSearchList',JSON.stringify(_recentSearchList));setRecentSearchList(JSON.parse(window.localStorage.getItem('recentSearchList')));}};var doSearch=function doSearch(input){updateSearchOptions(input);updateRecentSearch(input);setRecentSearchList(JSON.parse(window.localStorage.getItem('recentSearchList')));goToSearchResultPage(input);};var removeRecentSearch=function removeRecentSearch(item){var recentSearchList=JSON.parse(window.localStorage.getItem('recentSearchList'));var newRecentSearchList=recentSearchList.filter(function(e){return e!=item;});window.localStorage.setItem('recentSearchList',JSON.stringify(newRecentSearchList));setRecentSearchList(JSON.parse(window.localStorage.getItem('recentSearchList')));updateHasSearchValues(false);};var updateHasSearchValues=function updateHasSearchValues(input){setHasSearchValues(input&&input.length>0);};var updateSearchOptions=function updateSearchOptions(searchInput){setOptions(allSearchOptions.filter(function(item){return item.toLowerCase().includes(searchInput.toLowerCase());}));};var openSearchPage=function openSearchPage(){setOpenPage(true);};var closeSearchPage=function closeSearchPage(){resetSearchInput();setOpenPage(false);};return/*#__PURE__*/_jsxs(Grid,{container:true,alignItems:\"flex-start\",justifyContent:\"center\",className:classes.container,children:[isOldVersion&&/*#__PURE__*/_jsx(SearchBar,{startSearch:openSearchPage}),/*#__PURE__*/_jsx(SearchPage,{openPage:openPage,cancelSearch:closeSearchPage,isOldVersion:isOldVersion,recentSearchList:recentSearchList,resetSearchInput:resetSearchInput,doSearch:doSearch,removeRecentSearch:removeRecentSearch,hasSearchValues:hasSearchValues,updateHasSearchValues:updateHasSearchValues,searchOptions:options,updateSearchOptions:updateSearchOptions}),/*#__PURE__*/_jsx(Typography,{children:\"Welcome to Facilities Page. Start searching now!\"})]});}export default FacilitiesPage;","map":{"version":3,"sources":["/Users/kagurayuuki/Documents/AY202122/Sem2/CS4249 HCI/activesg/frontend/src/pages/FacilitiesPage.jsx"],"names":["React","useEffect","useState","useParams","useLocation","useNavigate","makeStyles","useTheme","Grid","Typography","SearchPage","SearchBar","allSearchOptions","useStyles","theme","container","minHeight","paddingTop","spacing","FacilitiesPage","classes","location","navigate","versionId","URLSearchParams","search","get","isOldVersion","openPage","setOpenPage","hasSearchValues","setHasSearchValues","options","setOptions","JSON","parse","window","localStorage","getItem","recentSearchList","setRecentSearchList","setItem","stringify","goToSearchResultPage","searchInput","resetSearchInput","updateRecentSearch","newSearch","length","updateHasSearchValues","includes","unshift","index","indexOf","splice","doSearch","input","updateSearchOptions","removeRecentSearch","item","newRecentSearchList","filter","e","toLowerCase","openSearchPage","closeSearchPage"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, useLocation, useNavigate } from \"react-router-dom\";\nimport { makeStyles, useTheme } from '@mui/styles';\nimport Grid from '@mui/material/Grid';\nimport Typography from '@mui/material/Typography';\nimport SearchPage from './SearchPage';\nimport SearchBar from '../components/SearchBar.jsx';\nimport { allSearchOptions } from '../resources/constants.jsx';\n\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        minHeight: 'calc(100vh - 56px)',\n        paddingTop: theme.spacing(2)\n    }\n}));\n\nfunction FacilitiesPage() {\n    const classes = useStyles();\n    const location = useLocation();\n    const navigate = useNavigate();\n    const versionId = new URLSearchParams(location.search).get('version') || 1;\n\n    const isOldVersion = (versionId == 1) || (versionId == 2);\n\n    const [openPage, setOpenPage] = useState(false);\n    const [hasSearchValues, setHasSearchValues] = useState(false);\n    const [options, setOptions] = useState(allSearchOptions);\n    const [recentSearchList, setRecentSearchList] = useState(JSON.parse(window.localStorage.getItem('recentSearchList')));\n\n    useEffect(() => {\n        if (window.localStorage.getItem('recentSearchList') === null) {\n            window.localStorage.setItem('recentSearchList', JSON.stringify([]));\n        }\n    }, [recentSearchList, options]);\n\n    const goToSearchResultPage = searchInput => {\n        navigate(`/facilities/result?version=${versionId}&query=${searchInput}`);\n    };\n\n    const resetSearchInput = () => {\n        setHasSearchValues(false);\n        setOptions(allSearchOptions);\n    };\n\n    const updateRecentSearch = (newSearch) => {\n        if (newSearch.length > 0) {\n            updateHasSearchValues(newSearch);\n            const recentSearchList = JSON.parse(window.localStorage.getItem('recentSearchList'));\n            if (!recentSearchList.includes(newSearch)) {\n                recentSearchList.unshift(newSearch);\n            } else if (recentSearchList.includes(newSearch)) {\n                const index = recentSearchList.indexOf(newSearch);\n                recentSearchList.splice(index, 1);\n                recentSearchList.unshift(newSearch);\n            }\n            window.localStorage.setItem('recentSearchList', JSON.stringify(recentSearchList));\n            setRecentSearchList(JSON.parse(window.localStorage.getItem('recentSearchList')));\n        }\n    };\n\n    const doSearch = input => {\n        updateSearchOptions(input)\n        updateRecentSearch(input);\n        setRecentSearchList(JSON.parse(window.localStorage.getItem('recentSearchList')));\n        goToSearchResultPage(input);\n    };\n\n    const removeRecentSearch = item => {\n        const recentSearchList = JSON.parse(window.localStorage.getItem('recentSearchList'));\n        const newRecentSearchList = recentSearchList.filter(e => e != item);\n        window.localStorage.setItem('recentSearchList', JSON.stringify(newRecentSearchList));\n        setRecentSearchList(JSON.parse(window.localStorage.getItem('recentSearchList')));\n        updateHasSearchValues(false);\n    }\n\n    const updateHasSearchValues = input => {\n        setHasSearchValues(input && input.length > 0);\n    };\n\n    const updateSearchOptions = searchInput => {\n        setOptions(allSearchOptions.filter(item => item.toLowerCase().includes(searchInput.toLowerCase())));\n    };\n\n    \n    const openSearchPage = () => {\n        setOpenPage(true);\n    };\n    const closeSearchPage = () => {\n        resetSearchInput();\n        setOpenPage(false);\n    };\n\n    return (\n        <Grid container alignItems=\"flex-start\" justifyContent=\"center\" className={classes.container}>\n            {isOldVersion && (\n                <SearchBar startSearch={openSearchPage} />\n            )}\n            <SearchPage \n                openPage={openPage}\n                cancelSearch={closeSearchPage}\n                isOldVersion={isOldVersion} \n                recentSearchList={recentSearchList}\n                resetSearchInput={resetSearchInput}\n                doSearch={doSearch}\n                removeRecentSearch={removeRecentSearch}\n                hasSearchValues={hasSearchValues}\n                updateHasSearchValues={updateHasSearchValues}\n                searchOptions={options}\n                updateSearchOptions={updateSearchOptions}\n            />\n            <Typography>Welcome to Facilities Page. Start searching now!</Typography>\n        </Grid>\n    );\n}\n\nexport default FacilitiesPage;"]},"metadata":{},"sourceType":"module"}